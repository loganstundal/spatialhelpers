#-----------------------------------------------------------------------------#
#
# Author:        Logan Stundal
# Date:          July 22, 2021
# Purpose:       Note
#
#
# Copyright (c): Logan Stundal, 2021
# Email:         stund005@umn.edu
#
#-----------------------------------------------------------------------------#
#
# Notes:
#        Tidy BLS unemployment data
#
# Source:
#       Index url - https://www.bls.gov/web/laus.supp.toc.htm
#       File url  - https://www.bls.gov/web/laus/ststdsadata.zip
#-----------------------------------------------------------------------------#



#-----------------------------------------------------------------------------#
# ADMINISTRATIVE                                                          ----
#-----------------------------------------------------------------------------#

#---------------------------#
# Clear working environment
#---------------------------#
rm(list = ls())

#---------------------------#
# Load required packages
#---------------------------#
library(tidyverse)

#---------------------------#
# Load data
#---------------------------#
unemp <- read_csv("data-raw/bls_unemp.csv")
#-----------------------------------------------------------------------------#



#-----------------------------------------------------------------------------#
# TIDY DATA                                                               ----
#-----------------------------------------------------------------------------#
head(unemp)

sort(unique(unemp$unit_name))

unemp <- unemp %>%
  filter(!unit_name %in% c("District of Columbia", "Los Angeles County",
                           "New York city"),
         year %in% c(2019:2021)) %>%
  mutate(fips = as.numeric(fips)) %>%
  rename(name = unit_name,
         unemp_rate = pop_unemp_rate) %>%
  select(fips, name, year, month, unemp_rate)

head(unemp)
tail(unemp)

usethis::use_data(unemp, overwrite = TRUE)
#-----------------------------------------------------------------------------#



#-----------------------------------------------------------------------------#
# ANALYSIS                                                                ----
#-----------------------------------------------------------------------------#
#-----------------------------------------------------------------------------#



#-----------------------------------------------------------------------------#
# SAVE                                                                    ----
#-----------------------------------------------------------------------------#
#save.image()
#rm(list = ls())
#-----------------------------------------------------------------------------#
